(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4191],{20011:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var s=a(95155),r=a(58607);let d=e=>{let{isOpen:t,onClose:a,onConfirm:d,title:i,message:l,isLoading:n=!1}=e;return(0,s.jsx)(r.A,{isOpen:t,onClose:a,title:i,size:"md",children:(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("p",{className:"text-gray-700 mb-4 dark:text-white",children:l}),(0,s.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,s.jsx)("button",{onClick:a,className:"disabled:opacity-50 px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 dark:bg-gray-800 dark:text-white",disabled:n,children:"Cancel"}),(0,s.jsx)("button",{onClick:d,className:"disabled:opacity-50 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 dark:bg-red-600 dark:text-white",disabled:n,children:"Confirm"})]})]})})}},27203:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var s=a(95155),r=a(12115);function d(e){var t;let a=(0,r.useRef)(null);return t=e.onClick,(0,r.useEffect)(()=>{function e(e){a.current&&!a.current.contains(e.target)&&(e.stopPropagation(),t())}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[t,a]),(0,s.jsx)("div",{className:e.className,ref:a,children:e.children})}},29727:(e,t,a)=>{Promise.resolve().then(a.bind(a,71180))},58607:(e,t,a)=>{"use strict";a.d(t,{A:()=>s.A});var s=a(59927)},59927:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(95155),r=a(52596),d=a(12115),i=a(27203);let l={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","3xl":"max-w-3xl"},n=e=>{let{isOpen:t,onClose:a,title:n,children:c,className:o="",size:x="lg"}=e;return((0,d.useEffect)(()=>{let e=e=>{"Escape"===e.key&&a()};return t&&document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[t,a]),t)?(0,s.jsx)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-white/10 backdrop-blur-sm dark:bg-gray-900/50",children:(0,s.jsx)(i.A,{onClick:a,className:(0,r.A)("w-full",l[x],o),children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 relative dark:bg-gray-900 dark:border-gray-800 ".concat(o),role:"dialog","aria-modal":"true",children:[(0,s.jsx)("button",{onClick:a,className:"absolute top-3 right-3 text-gray-400 hover:text-gray-600 text-lg dark:text-white","aria-label":"Close",children:"âœ•"}),n&&(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4 dark:text-white",children:n}),c]})})}):null}},70241:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var s=a(95155),r=a(47924);let d=e=>{let{value:t,onChange:a,placeholder:d="Search...",className:i=""}=e;return(0,s.jsxs)("div",{className:"relative rounded-[8px] ".concat(i),children:[(0,s.jsx)(r.A,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-[#1b2559] dark:text-gray-400",size:18}),(0,s.jsx)("input",{type:"text",placeholder:d,value:t,onChange:e=>a(e.target.value),className:"pr-10 pl-4 py-2 border border-[#f4f7fe] rounded-lg w-full dark:bg-gray-900 dark:border-gray-800 dark:text-white"})]})}},71180:(e,t,a)=>{"use strict";a.d(t,{default:()=>E});var s=a(95155),r=a(16694),d=a(74126),i=a(12115),l=a(97712),n=a(17707),c=a(20011),o=a(84616),x=a(42355),g=a(13052),m=a(66766),u=a(70241),h=a(58607),p=a(84662),b=a(34477);let f=(0,b.createServerReference)("40fefbc0cbae7d6cebd6345343f0404be8be031bbc",b.callServer,void 0,b.findSourceMapURL,"getBadgesList"),y=(0,b.createServerReference)("40477511d2e789681cf3d32000b1d9608f0f7d1a0e",b.callServer,void 0,b.findSourceMapURL,"assignUserBadgeAction");var j=a(71597),v=a.n(j),N=a(74157),k=a(92502),w=a(38543),A=a(35695);let C=e=>{let{userId:t,assignedBadges:a}=e,[r,d]=(0,i.useState)(!1),[n,c]=(0,i.useState)([]),[b,j]=(0,i.useState)(""),[C,S]=(0,i.useState)(0),[E]=(0,i.useState)(4),[R,L]=(0,i.useState)(0),I=(0,A.useRouter)();(0,i.useEffect)(()=>{f({...b&&{searchString:b},skip:C*E,limit:E,type:p.s.EXPERT}).then(e=>{c(e.data.data),L(e.data.count)})},[b,C,E]);let P=async e=>{let a=await y({userId:t,badgeId:e});a.status?(w.oR.success(a.message),d(!1),I.refresh()):w.oR.error(a.message)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(l.A,{variant:"primary",size:"sm",onClick:()=>d(!0),children:[(0,s.jsx)(o.A,{className:"w-4 h-4"}),"Assign Badge"]}),(0,s.jsx)(h.A,{isOpen:r,onClose:()=>d(!1),children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Assign Badge"}),(0,s.jsx)(u.A,{value:b,onChange:j}),(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 mt-4",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-2 text-left text-[0.875] font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Name"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left text-[0.875] font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Image"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left text-[0.875] font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Type"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left text-[0.875] font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Action"}),(0,s.jsx)("th",{className:"px-4 py-2"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200 dark:bg-gray-900 dark:divide-gray-800",children:n.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-4 py-2 text-sm font-semibold text-gray-800 dark:text-white",children:e.name}),(0,s.jsx)("td",{className:"px-4 py-2",children:e.imageURL&&(0,s.jsx)(m.default,{src:k.C1+"/"+e.imageURL,alt:e.name,width:32,height:32,className:"rounded-full object-cover"})}),(0,s.jsx)("td",{className:"px-4 py-2 text-sm font-semibold text-gray-800 dark:text-white",children:e.type}),(0,s.jsx)("td",{className:"px-4 py-2",children:(0,s.jsx)(l.A,{variant:"primary",size:"sm",onClick:()=>P(e._id),disabled:a.includes(e._id),children:"Assign"})})]},e._id))})]}),Math.ceil(R/E)>1&&(0,s.jsx)("div",{className:"flex justify-center mt-4",children:(0,s.jsx)(v(),{pageCount:Math.ceil(R/E),forcePage:C,onPageChange:e=>S(e.selected),containerClassName:"flex space-x-2 items-center paginationWrapper",pageClassName:"rounded",activeClassName:"text-black font-bold dark:text-white",previousLabel:(0,s.jsx)(l.A,{variant:"ghost",size:"sm",children:(0,s.jsx)(x.A,{className:"w-4 h-4"})}),nextLabel:(0,s.jsx)(l.A,{variant:"ghost",size:"sm",children:(0,s.jsx)(g.A,{className:"w-4 h-4"})}),pageLabelBuilder:e=>(0,s.jsx)(N.E,{page:e,currentPage:C+1}),disabledClassName:"opacity-50 cursor-not-allowed"})})]})})]})},S=(0,b.createServerReference)("4071e3e7ce021d8bce6361c7132f696c12f3253313",b.callServer,void 0,b.findSourceMapURL,"deleteUserBadgeAction"),E=e=>{let{data:t,userId:a,count:o}=e,x=(0,A.useSearchParams)(),g=(0,A.useRouter)(),[u,h]=(0,i.useTransition)(),[p,b]=(0,i.useState)({open:!1,badgeId:""}),[f,y]=(0,i.useState)(0),[j,v]=(0,i.useState)(Number(x.get("limit"))||5);(0,i.useEffect)(()=>{let e=new URLSearchParams(x.toString());f>0?e.set("skip",(f*j).toString()):e.delete("skip"),10!==j?e.set("limit",j.toString()):e.delete("limit"),g.push("?".concat(e.toString()))},[f,j]);let E=[{title:"Name",field:"badge",render:e=>(0,s.jsx)("div",{children:(0,s.jsx)("h4",{className:"text-sm font-semibold text-gray-800 dark:text-white",children:e.badge.name})})},{title:"Assigned On",field:"createdAt",render:e=>(0,s.jsx)("div",{children:(0,r.GP)(new Date(e.createdAt),"dd MMM yyyy")})},{title:"Image",field:"badge",render:e=>e.badge.imageURL?(0,s.jsx)(m.default,{src:"".concat(k.C1,"/").concat(e.badge.imageURL),alt:"badge-image",className:"object-cover rounded-full",width:32,height:32}):(0,s.jsx)("span",{className:"text-gray-400 text-sm italic",children:"No image"})},{title:"Actions",field:"",render:e=>(0,s.jsx)("div",{children:(0,s.jsx)(l.A,{variant:"danger",size:"sm",onClick:()=>b({open:!0,badgeId:e._id}),children:(0,s.jsx)(d.A,{className:"w-4 h-4"})})})}];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Assigned Badges"}),(0,s.jsx)(C,{userId:a,assignedBadges:t.map(e=>e.badge._id)})]}),(0,s.jsx)(n.A,{columns:E,data:t,keyExtractor:e=>e._id,hideSelectCol:!0}),(0,s.jsx)(N.A,{totalItems:o,currentPage:f+1,pageSize:j,onPageChange:e=>{console.log(e,"page"),y(e)},onPageSizeChange:e=>{v(e)},title:"Promo Codes"}),(0,s.jsx)(c.A,{isOpen:p.open,onClose:()=>b({open:!1,badgeId:""}),onConfirm:()=>{h(async()=>{let e=await S({userBadgeIds:[p.badgeId]});e.status?w.oR.success(e.message):w.oR.error(e.message),b({open:!1,badgeId:""}),g.refresh()})},title:"Unassign Badge",message:"Are you sure you want to unassign this badge?",isLoading:u})]})}},84662:(e,t,a)=>{"use strict";a.d(t,{s:()=>s,u:()=>r});let s={CONDITIONAL:1,EXPERT:2},r={[s.CONDITIONAL]:"Conditional",[s.EXPERT]:"Expert"}}},e=>{var t=t=>e(e.s=t);e.O(0,[8543,8291,3063,81,2502,5991,8441,1684,7358],()=>t(29727)),_N_E=e.O()}]);