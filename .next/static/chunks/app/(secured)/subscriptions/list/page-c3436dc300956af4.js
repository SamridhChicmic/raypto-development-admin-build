(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1607],{17362:(e,t,s)=>{Promise.resolve().then(s.bind(s,51511))},20011:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var a=s(95155),i=s(58607);let r=e=>{let{isOpen:t,onClose:s,onConfirm:r,title:l,message:n,isLoading:d=!1}=e;return(0,a.jsx)(i.A,{isOpen:t,onClose:s,title:l,size:"md",children:(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("p",{className:"text-gray-700 mb-4 dark:text-white",children:n}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,a.jsx)("button",{onClick:s,className:"disabled:opacity-50 px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 dark:bg-gray-800 dark:text-white",disabled:d,children:"Cancel"}),(0,a.jsx)("button",{onClick:r,className:"disabled:opacity-50 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 dark:bg-red-600 dark:text-white",disabled:d,children:"Confirm"})]})]})})}},40619:(e,t,s)=>{"use strict";s.d(t,{bw:()=>a});let a={LOGIN:"/login",REGISTER:"/register",FORGOT_PASSWORD:"/forgot-password",DASHBOARD:"/dashboard",USERS:"/users",USERS_LIST:"/users/list",USERS_VIEW:"/users/view",DASHBOARD_CRM:"/dashboard/crm",INVOICES_LIST:"/invoices/list",INVOICES_PREVIEW:"/invoices/preview",INVOICES_ADD:"/invoices/add",INVOICES_EDIT:"/invoices/edit",DASHBOARD_ANALYTICS:"/dashboard/analytics",USERS_VIEW_ACCOUNT:"/users/view/account",USERS_VIEW_SECURITY:"/users/view/security",USERS_VIEW_BILLING:"/users/view/billing",USERS_VIEW_NOTIFICATIONS:"/users/view/notifications",USERS_VIEW_CONNECTIONS:"/users/view/connections",TRANSACTIONS_LIST:"/transactions/list",SUBSCRIPTIONS_LIST:"/subscriptions/list",SUBSCRIPTIONS_VIEW:"/subscriptions/view",BADGES:"/badges",BADGES_LIST:"/badges/list",BADGES_ADD:"/badges/add",BADGES_EDIT:"/badges/edit",COMPANIES:"/companies",COMPANIES_LIST:"/companies/list",COMPANIES_VIEW:"/companies/view",COMPANIES_VIEW_JOBS:"/companies/view/jobs",COMPANIES_VIEW_EVENTS:"/companies/view/events",COMPANIES_VIEW_BUSINESS:"/companies/view/businessleads",COMPANIES_VIEW_HIRING:"/companies/view/hiring",COMPANIES_VIEW_ENGAGEMENT:"/companies/view/engagement",COMPANIES_VIEW_SPONSORSHIP:"/companies/view/sponsorship",COMPANIES_VIEW_BOOST:"/companies/view/boost",COMPANIES_VIEW_GROWTH:"/companies/view/companygrowth",PROMO_CODES_LIST:"/promo-codes/list",EVENTS_LIST:"/events/list",GROUPS_LIST:"/groups/list",GAME_CONFIGS:"/game-configs",GAME_CONFIGS_LIST:"/game-configs/list",GAME_CONFIGS_VIEW:"/game-configs/view",BETS_HISTORY:"/bets-history",BETS_HISTORY_LIST:"/bets-history/list",CONFIGS:"/configs",CONFIGS_LIST:"/configs/list",CHAT:"/chat",CHAT_ROOMS_LIST:"/chat/rooms/list",CHAT_MESSAGES:"/chat/messages",CHAT_LIVE:"/chat/live",BONUS_SLIDES:"/bonus-slides",BONUS_SLIDES_LIST:"/bonus-slides/list",BONUS_SLIDES_ADD:"/bonus-slides/add",BONUS_SLIDES_EDIT:"/bonus-slides/edit"}},51511:(e,t,s)=>{"use strict";s.d(t,{default:()=>N});var a=s(95155),i=s(92657),r=s(13717),l=s(62525),n=s(84616),d=s(35695),o=s(12115),c=s(38543),u=s(34477);let S=(0,u.createServerReference)("4036383857cf320fd6252b0c7500ebd7e7cf4fcfa6",u.callServer,void 0,u.findSourceMapURL,"deleteSubscriptionAction"),x=(0,u.createServerReference)("40bc0b20d69d20058a83c77c682f47bc79db2f55de",u.callServer,void 0,u.findSourceMapURL,"addSubscriptionAction"),m=(0,u.createServerReference)("4052c81bb7c854822d4e0ac08e4b092c90b4909b63",u.callServer,void 0,u.findSourceMapURL,"updateSubscriptionAction");var p=s(74157),b=s(70241),h=s(17707),I=s(20011),g=s(40619),E=s(58607),v=s(59274);let y=[{name:"name",label:"Plan Name",type:"text",validation:{required:"Plan name is required"}},{name:"description",label:"Description",type:"textarea",validation:{required:"Description is required"}},{name:"monthlyPrice",label:"Monthly Price",type:"number",validation:{required:"Monthly price is required"},width:"w-[49%]"},{name:"yearlyPrice",label:"Yearly Price",type:"number",validation:{required:"Yearly price is required"},width:"w-[49%]"},{name:"features",label:"Features",type:"array",items:{type:"text"},validation:{required:"Features are required"}},{name:"color",label:"Color",type:"color",validation:{required:"Color is required"},width:"w-[49%]"},{name:"isActive",label:"Active",type:"switch"}],_=e=>{let{isOpen:t,onClose:s,onSave:i,plan:r,mode:l,isLoading:n}=e;return(0,a.jsxs)(E.A,{isOpen:t,onClose:s,size:"2xl",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"create"===l?"Create Plan":"Edit Plan"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-white",children:"create"===l?"Create a new subscription plan for your users":"Edit the details of an existing plan"})]}),(0,a.jsx)(v.A,{onSubmit:i,formConfig:y,defaultValues:"edit"===l?r:void 0,isLoading:n,scrollable:!0})]})},N=e=>{let{data:t,total:s}=e,[u,E]=(0,o.useState)(null),[v,y]=(0,o.useState)(-1),[N,A]=(0,o.useTransition)(),f=(0,d.useRouter)(),[w,C]=(0,o.useState)(1),[O,P]=(0,o.useState)(10),[T,j]=(0,o.useState)(!1),[R,k]=(0,o.useState)({open:!1}),[L,D]=(0,o.useState)(void 0),[V,M]=(0,o.useState)("create"),[U,B]=(0,o.useState)(""),G=e=>{D(e),M("edit"),j(!0)},W=async()=>{var e;if(null==R||null==(e=R.data)?void 0:e._id){let e=await S({subscriptionPlanIds:[R.data._id]});console.log(e,"res"),e.status&&(c.oR.success("Plan deleted successfully"),k({open:!1}),f.refresh())}},q=(0,d.useSearchParams)();(0,o.useEffect)(()=>{let e=new URLSearchParams(q.toString());w>1?e.set("skip",((w-1)*O).toString()):e.delete("skip"),u?(e.set("sortKey",u),e.set("sortDirection",v.toString())):(e.delete("sortKey"),e.delete("sortDirection")),U?e.set("search",U):e.delete("search"),f.push("".concat(g.bw.SUBSCRIPTIONS_LIST,"?").concat(e.toString()))},[w,O,q,f,u,v,U]);let H=[{field:"name",title:"Name",sortable:!0,sortKey:"name"},{field:"monthlyPrice",title:"Monthly Price",render:e=>(0,a.jsxs)("span",{className:"text-sm text-gray-600 dark:text-white",children:["$",e.monthlyPrice]}),sortable:!0,sortKey:"monthlyPrice"},{field:"yearlyPrice",title:"Yearly Price",render:e=>(0,a.jsxs)("span",{className:"text-sm text-gray-600 dark:text-white",children:["$",e.yearlyPrice]}),sortable:!0,sortKey:"yearlyPrice"},{field:"isActive",title:"Status",render:e=>(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-[0.875] font-medium rounded-full ".concat(e.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.isActive?"Active":"Inactive"})},{field:"",title:"Actions",render:e=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(i.A,{size:26,onClick:()=>f.push("".concat(g.bw.SUBSCRIPTIONS_VIEW,"/").concat(e._id)),className:"cursor-pointer p-1 text-blue-500 bg-blue-100 rounded-md"}),(0,a.jsx)(r.A,{size:26,onClick:()=>G(e),className:"cursor-pointer p-1 text-yellow-500 bg-yellow-100 rounded-md"}),(0,a.jsx)(l.A,{size:26,onClick:()=>k({open:!0,data:e}),className:"cursor-pointer p-1 text-red-500 bg-red-100 rounded-md"})]})}];return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-[1.5rem] font-bold text-[#1B2559] dark:text-white",children:"All Plans"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-white",children:"Manage your subscription plans"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(b.A,{value:U,onChange:e=>B(e)}),(0,a.jsxs)("button",{onClick:()=>{D(void 0),M("create"),j(!0)},className:"flex items-center space-x-2 px-4 py-2 bg-[#4F46E5] text-white rounded-lg hover:bg-purple-700 transition-colors dark:bg-[#4F46E5] dark:text-white",children:[(0,a.jsx)(n.A,{size:18}),(0,a.jsx)("span",{children:"Create New Plan"})]})]})]}),(0,a.jsx)(h.A,{columns:H,data:t,keyExtractor:e=>(null==e?void 0:e._id)||"",handleSort:(e,t)=>{E(e),y(t)}}),(0,a.jsx)(p.A,{title:"Subscription Plans",totalItems:s,pageSize:O,currentPage:w,onPageChange:e=>C(e+1),onPageSizeChange:e=>P(e)}),(0,a.jsx)(_,{isOpen:T,onClose:()=>j(!1),onSave:e=>{A(async()=>{if("create"===V)(await x(e)).status&&(c.oR.success("Plan created successfully"),j(!1),f.refresh());else{let t={...e,subscriptionPlanId:e._id||""};delete t._id;let s=await m(t);console.log(s,"res"),s.status&&(c.oR.success("Plan updated successfully"),j(!1),f.refresh())}})},plan:L,mode:V,isLoading:N}),(0,a.jsx)(I.A,{isOpen:R.open,onClose:()=>k({open:!1}),onConfirm:()=>void W(),title:"Delete Plan",message:"Are you sure you want to delete this plan?"})]})}},58607:(e,t,s)=>{"use strict";s.d(t,{A:()=>a.A});var a=s(59927)},59927:(e,t,s)=>{"use strict";s.d(t,{A:()=>d});var a=s(95155),i=s(52596),r=s(12115),l=s(27203);let n={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","3xl":"max-w-3xl"},d=e=>{let{isOpen:t,onClose:s,title:d,children:o,className:c="",size:u="lg"}=e;return((0,r.useEffect)(()=>{let e=e=>{"Escape"===e.key&&s()};return t&&document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[t,s]),t)?(0,a.jsx)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-white/10 backdrop-blur-sm dark:bg-gray-900/50",children:(0,a.jsx)(l.A,{onClick:s,className:(0,i.A)("w-full",n[u],c),children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 relative dark:bg-gray-900 dark:border-gray-800 ".concat(c),role:"dialog","aria-modal":"true",children:[(0,a.jsx)("button",{onClick:s,className:"absolute top-3 right-3 text-gray-400 hover:text-gray-600 text-lg dark:text-white","aria-label":"Close",children:"âœ•"}),d&&(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4 dark:text-white",children:d}),o]})})}):null}},70241:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var a=s(95155),i=s(47924);let r=e=>{let{value:t,onChange:s,placeholder:r="Search...",className:l=""}=e;return(0,a.jsxs)("div",{className:"relative rounded-[8px] ".concat(l),children:[(0,a.jsx)(i.A,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-[#1b2559] dark:text-gray-400",size:18}),(0,a.jsx)("input",{type:"text",placeholder:r,value:t,onChange:e=>s(e.target.value),className:"pr-10 pl-4 py-2 border border-[#f4f7fe] rounded-lg w-full dark:bg-gray-900 dark:border-gray-800 dark:text-white"})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[1129,8543,5520,357,8735,5368,2502,5991,9274,8441,1684,7358],()=>t(17362)),_N_E=e.O()}]);